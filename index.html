<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Самый обкуренный сайт — как родить дерево</title>
  <style>
    :root{--bg1:#0b0f2b;--bg2:#2b0030}
    html,body{height:100%;margin:0;font-family:Inter,Segoe UI,system-ui,Arial;background:linear-gradient(120deg,var(--bg1),var(--bg2));overflow:hidden;color:#fff}
    .wrap{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:18px;padding:28px}
    h1{font-size:clamp(22px,5.4vw,48px);margin:0;text-align:center;letter-spacing:1px;text-shadow:0 6px 40px rgba(0,0,0,.6);position:relative}
    .card{backdrop-filter:blur(6px) saturate(1.2);padding:14px;border-radius:14px;display:flex;flex-direction:column;align-items:center;gap:10px;background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(0,0,0,0.06));box-shadow:0 10px 40px rgba(0,0,0,.6);position:relative}
    .controls{display:flex;gap:10px;align-items:center}
    button{appearance:none;border:0;padding:10px 14px;border-radius:10px;background:linear-gradient(90deg,#ff66cc,#7a5cff);color:#fff;font-weight:600;cursor:pointer;box-shadow:0 6px 18px rgba(122,92,255,.18)}
    #scene{width:920px;height:560px;max-width:94vw;max-height:66vh;border-radius:12px;overflow:hidden;background:transparent;display:block}
    .topbar{position:absolute;top:18px;left:18px;font-size:13px;opacity:.9}
    footer{position:absolute;bottom:14px;left:14px;font-size:12px;opacity:.7}

    /* Glitch title */
    .glitch{position:relative}
    .glitch::before, .glitch::after{content:attr(data-text);position:absolute;left:0;top:0;width:100%;overflow:hidden}
    .glitch::before{color:#ff77cc;clip-path:polygon(0 0,100% 0,100% 33%,0 33%);transform:translate(2px,-2px)}
    .glitch::after{color:#7a5cff;clip-path:polygon(0 66%,100% 66%,100% 100%,0 100%);transform:translate(-2px,2px)}
    @keyframes title-flicker{0%,100%{opacity:1}50%{opacity:.6}}
    .glitch{animation:title-flicker 2.8s infinite}

    /* canvas glitch slices */
    .slice{position:absolute;left:0;top:0;pointer-events:none}

    /* small UI hint */
    .hint{font-size:12px;opacity:.85}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1 class="glitch" data-text="Самый обкуренный сайт">Самый обкуренный сайт</h1>
      <div class="controls">
        <div style="display:flex;flex-direction:column;align-items:center">
          <label class="hint">Число деревьев</label>
          <input id="count" type="range" min="1" max="12" value="3" />
        </div>
        <button id="grow">Родить</button>
        <button id="forest">Родить лес</button>
        <button id="spawnGnomes">Позвать гномиков</button>
      </div>
    </div>
    <div style="position:relative;width:100%;display:flex;justify-content:center">
      <canvas id="scene"></canvas>
      <div id="glitch-slices" style="position:absolute;inset:0;pointer-events:none"></div>
    </div>
  </div>
  <div class="topbar">click & drag — rotate view · space — reset</div>
  <footer>Нажмите «Родить» или «Родить лес». Гномики гуляют по полю.</footer>

  <script>
    const canvas = document.getElementById('scene');
    const slicesContainer = document.getElementById('glitch-slices');
    const ctx = canvas.getContext('2d');
    function updateSize(){ let Wc = canvas.clientWidth || 800; let Hc = canvas.clientHeight || 480; canvas.width = Wc; canvas.height = Hc; return {W:Wc,H:Hc}; }
    let {W,H} = updateSize();

    window.addEventListener('resize',()=>{ ({W,H} = updateSize()); renderBackground(); drawFrame(0); });

    const bg = document.createElement('canvas');
    const bctx = bg.getContext('2d');
    function renderBackground(){
      bg.width=W; bg.height=H;
      const img = bctx.createImageData(W,Math.max(1,H));
      for(let i=0;i<img.data.length;i+=4){
        const v = Math.floor(80 + 55*Math.sin(i*0.00012) + 40*(Math.random()-0.5));
        img.data[i]=v+20; img.data[i+1]=v; img.data[i+2]=v+30; img.data[i+3]=255;
      }
      bctx.putImageData(img,0,0);
    }
    renderBackground();

    // Trees array
    function drawSingleTree(x, baseY, progress, seed){
      ctx.save(); ctx.translate(x, baseY);
      const maxDepth = 10;
      function branch(len, angle, depth){
        ctx.save(); ctx.rotate(angle);
        const localProgress = Math.min(1, Math.max(0, (progress - depth*0.06)/0.7));
        const drawLen = len * localProgress;
        ctx.lineWidth = Math.max(1, (maxDepth-depth)+1);
        const hue = (30 + depth*12 + Math.sin(progress*6+depth+seed)*30)%360;
        ctx.strokeStyle = `hsl(${hue} 85% ${30 + depth*4}%)`;
        ctx.beginPath(); ctx.moveTo(0,0); ctx.lineTo(0,-drawLen); ctx.stroke();
        ctx.translate(0,-drawLen);
        if(depth < maxDepth && localProgress > 0.01){
          const s = 0.72 + 0.06*Math.sin(depth+progress*3+seed);
          branch(len*s, 0.18 + 0.02*Math.sin(depth*2+progress*1.5+seed), depth+1);
          branch(len*s, -0.22 + 0.02*Math.cos(depth*1.4+progress*1.1+seed), depth+1);
        } else if(depth >= maxDepth && localProgress > 0.9){
          ctx.fillStyle = `hsl(${(hue+80)%360} 90% 55%)`;
          ctx.beginPath(); ctx.ellipse(0,0,6+Math.random()*6,10+Math.random()*6,Math.random()*2,0,Math.PI*2); ctx.fill();
        }
        ctx.restore();
      }
      branch(H*0.12, 0, 0);
      ctx.restore();
    }

    // Gnomes
    const gnomes = [];
    function spawnGnomes(n=4){
      gnomes.length=0;
      for(let i=0;i<n;i++){
        gnomes.push({x:Math.random()*W, y:H*0.78 + Math.random()*40 - 20, vx:(Math.random()-.5)*0.6, vy:0, r:8+Math.random()*6, t:Math.random()*6});
      }
    }
    function updateGnomes(dt){
      for(const g of gnomes){
        g.x += g.vx * dt * 60;
        if(g.x < 0) g.x = W; if(g.x > W) g.x = 0;
        g.t += dt;
      }
    }
    function drawGnomes(){
      for(const g of gnomes){
        ctx.save(); ctx.translate(g.x, g.y);
        ctx.fillStyle = '#ffcc99'; ctx.beginPath(); ctx.ellipse(0,0,g.r,g.r*1.2,0,0,Math.PI*2); ctx.fill();
        ctx.fillStyle = '#ff66cc'; ctx.beginPath(); ctx.moveTo(0,-g.r*1.6); ctx.lineTo(-g.r, -g.r*0.4); ctx.lineTo(g.r, -g.r*0.4); ctx.closePath(); ctx.fill();
        ctx.fillStyle='#222'; ctx.beginPath(); ctx.ellipse(-g.r*0.35,-g.r*0.1,1.2,1.8,0,0,Math.PI*2); ctx.fill(); ctx.beginPath(); ctx.ellipse(g.r*0.35,-g.r*0.1,1.2,1.8,0,0,Math.PI*2); ctx.fill();
        ctx.restore();
      }
    }

    // Main draw
    let anim=0, start=0, running=false, lastTS=0;
    let treesCount = 3;
    try{ treesCount = parseInt(document.getElementById('count').value,10)||3 }catch(e){}
    let glitchTimer = 0;

    function drawFrame(progress){
      ctx.clearRect(0,0,W,H);
      ctx.drawImage(bg,0,0);
      const fog = ctx.createLinearGradient(0,0,W,H); fog.addColorStop(0,'rgba(120,20,220,0.06)'); fog.addColorStop(0.5,'rgba(10,200,180,0.05)'); fog.addColorStop(1,'rgba(255,120,200,0.04)'); ctx.fillStyle=fog; ctx.fillRect(0,0,W,H);
      const baseY = H*0.92;
      const spread = Math.min(W*0.36, 80 + treesCount*40);
      for(let i=0;i<treesCount;i++){
        const nx = W/2 + (i - (treesCount-1)/2) * (spread/Math.max(1,treesCount-1)) + Math.sin(progress*3 + i)*12;
        drawSingleTree(nx, baseY, progress, i*23);
      }
      ctx.globalCompositeOperation='lighter';
      for(let i=0;i<6;i++){
        ctx.beginPath();
        const r = 40 + i*60 + Math.sin(progress*1.5+i)*18;
        const a = progress*0.8 + i*0.9;
        ctx.fillStyle = `hsla(${(i*60+progress*80)%360},80%,60%,${0.02 + 0.02*Math.sin(progress*3+i)})`;
        ctx.ellipse(W/2 + Math.cos(a)*r, H*0.6 + Math.sin(a)*r*0.4, 120, 60, a, 0, Math.PI*2);
        ctx.fill();
      }
      ctx.globalCompositeOperation='source-over';
      drawGnomes();
    }

    function animate(ts){
      if(!start) start = ts; if(!lastTS) lastTS = ts;
      const t = (ts-start)/1000; const dt = (ts-lastTS)/1000; lastTS = ts;
      const progress = Math.min(1, Math.pow(Math.sin(Math.min(1,t)*Math.PI/2),0.9));
      updateGnomes(dt);
      drawFrame(progress);
      glitchTimer -= dt;
      if(glitchTimer <= 0){ glitchTimer = 0.9 + Math.random()*2.5; createGlitchSlices(); }
      if(t < 8){ anim = requestAnimationFrame(animate); } else { running=false; start=0; lastTS=0; }
    }

    function createGlitchSlices(){
      slicesContainer.innerHTML='';
      const slices = 3 + Math.floor(Math.random()*5);
      for(let i=0;i<slices;i++){
        const s = document.createElement('canvas'); s.className='slice'; s.width=W; s.height=H; s.style.opacity = (0.04+Math.random()*0.08);
        const sc = s.getContext('2d'); const sy = Math.random()*H; const sh = Math.min(H,4 + Math.random()*40);
        sc.drawImage(canvas,0,sy,W,sh, Math.random()*20-10, sy, W, sh);
        s.style.transform = `translateX(${(Math.random()-0.5)*40}px) skewX(${(Math.random()-0.5)*6}deg)`;
        s.style.transition = 'all .7s ease-out';
        slicesContainer.appendChild(s);
        setTimeout(()=>{ s.style.opacity='0'; s.style.transform = `translateX(${(Math.random()-0.5)*300}px) skewX(0deg)`; }, 80 + Math.random()*200);
        setTimeout(()=>{ if(s.parentNode) s.parentNode.removeChild(s); }, 1200 + Math.random()*1000);
      }
    }

    document.getElementById('count').addEventListener('input',(e)=>{ treesCount = parseInt(e.target.value,10); });
    document.getElementById('grow').addEventListener('click',()=>{ if(running){ cancelAnimationFrame(anim); running=false; start=0; } running=true; anim=requestAnimationFrame((ts)=>{ start=ts; lastTS=ts; animate(ts)}); });
    document.getElementById('forest').addEventListener('click',()=>{ treesCount = Math.min(12, Math.max(1, Math.floor(Math.random()*9)+3)); document.getElementById('count').value = treesCount; if(!running){ document.getElementById('grow').click(); } });
    document.getElementById('spawnGnomes').addEventListener('click',()=>{ spawnGnomes(3 + Math.floor(Math.random()*6)); if(!running) document.getElementById('grow').click(); });

    let isDown=false, lastX=0, lastY=0, tiltX=0, tiltY=0;
    canvas.addEventListener('pointerdown', (e)=>{isDown=true; lastX=e.clientX; lastY=e.clientY; canvas.setPointerCapture(e.pointerId)});
    canvas.addEventListener('pointermove',(e)=>{if(!isDown) return; const dx=e.clientX-lastX, dy=e.clientY-lastY; tiltX+=dy*0.002; tiltY+=dx*0.002; canvas.style.transform = `perspective(900px) rotateX(${tiltX}rad) rotateY(${tiltY}rad)`; lastX=e.clientX; lastY=e.clientY});
    window.addEventListener('pointerup',()=>{isDown=false});
    window.addEventListener('keydown',(e)=>{if(e.code==='Space'){tiltX=tiltY=0; canvas.style.transform='none'}})

    spawnGnomes(0);
    drawFrame(0);
  </script>
</body>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>
<body>
    <h1>Мухтарио</h1>
    <img src="smario.jpg">
</body>
</html>